@model GearShop.Models.GearDetail

@{
    ViewBag.Title = "Details";
}

<h2>Details</h2>

<div>
    <h4>GearDetail</h4>
    <hr />
    <dl class="dl-horizontal">
        <dt>
            @Html.DisplayNameFor(model => model.GearId)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.GearId)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Name)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Name)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.NumAvailable)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.NumAvailable)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.IsAvailable)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.IsAvailable)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Price)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Price)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Category)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Category.CategoryName)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Category)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Category.CategoryType)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.AverageRating)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.AverageRating)
        </dd>

    </dl>
</div>

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        @Html.HiddenFor(model => model.GearId)
        @Html.HiddenFor(model => model.AverageRating)
        @Html.HiddenFor(model => model.Price)
        @Html.HiddenFor(model => model.NumAvailable)
        @Html.HiddenFor(model => model.Name)
        @Html.HiddenFor(model => model.IsAvailable)
        @Html.HiddenFor(model => model.PictureUrl)
        <div class="form-group">
            <div class="col-md-10">
                @Html.DisplayNameFor(model => model.NumberOfGearInCart)
                @Html.EditorFor(model => model.NumberOfGearInCart, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.NumberOfGearInCart, "", new { @class = "text-danger" })
            </div>
        </div>

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="Add to cart" class="btn btn-outline-primary" />
            </div>
        </div>
    </div>
}

<p class="col-md-12">
    <a href="@Url.Action("Create", "Comment")" class="btn btn-primary">Leave a review!</a>
    @Html.ActionLink("Edit", "Edit", new { /* id = Model.PrimaryKey */ }) |
    @Html.ActionLink("Back to List", "Index")
</p>




@*<script src="~/Scripts/jquery-3.4.1.min.js"></script>*@
<!--<script>
    document.getElementById('addToCart').addEventListener('click', addToCart)

    function addToCart() {
        const quantity = $('#AmountOfGearInCart option:selected').val();
        const datapacket = {
            GearId: @Html.DisplayFor(model => model.GearId),
            GearNameInCart: '@Html.DisplayFor(model => model.Name)',
            CostOfGear: @Html.DisplayFor(model => model.Price),
            AmountOfGearInCart: quantity
        }-->
@*$.ajax({
        type: 'POST',
        url: 'https://localhost:44345'+'@Url.Action("AddGearToCart", "Cart")',
        dataType: 'json',
        data: datapacket,
        success: function (result) {
            console.log('Success!')
        },
        error: function (result) {
            console.log(result.responseText)
        }
    });*@
<!--// Example POST method implementation:
async function postData(url, data) {
    // Default options are marked with *
    const response = await fetch(url, {
        method: 'POST', // *GET, POST, PUT, DELETE, etc.
        mode: 'cors', // no-cors, *cors, same-origin
        cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached
        credentials: 'same-origin', // include, *same-origin, omit
        headers: {
            'Content-Type': 'application/json'
            // 'Content-Type': 'application/x-www-form-urlencoded',
        },
        redirect: 'follow', // manual, *follow, error
        referrerPolicy: 'no-referrer', // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url
        body: JSON.stringify(data) // body data type must match "Content-Type" header
    });
    return response.json(); // parses JSON response into native JavaScript objects
}

postData('https://localhost:44345'+'@**@Url.Action("CreateIndividualGearItem", "Cart")', datapacket).then(res => console.log(res))-->
@*$.ajax({
        type: "POST",
        url: "/Cart/CreateIndividualGearItem",
        data: JSON.stringify(datapacket),
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (response) {
            if (response != null) {
                alert("Success!");
            } else {
                alert("Something went wrong");
            }
        },
        failure: function (response) {
            alert(response.responseText);
        },
        error: function (response) {
            alert(response.responseText);
        }
    }); *@
<!--}
</script>-->
